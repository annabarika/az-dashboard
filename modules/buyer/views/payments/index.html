<div class="page-header">
    <div class="box-layout">
        <div class="row mb-xs">
            <div class="col-sm-3">
                <!--<div class="btn btn-info" ng-click="addNewPayment()"><i class="fa fa-plus"></i> New payment</div>-->
                <div class="btn btn-info" ng-click="addNewPayment('payment')"><i class="fa fa-plus"></i> New credit</div>
                <div class="btn btn-warning" ng-click="addNewPayment('refund')"><i class="fa fa-plus"></i> New debit</div>
                <!--<div class="btn btn-default" ng-hide="userType!='admin'" ng-click="addNewCashOffice()"><i class="fa fa-plus"></i> New cashier office</div>-->
            </div>
            <div class="col-sm-5">
                <div class="col-sm-4 va-m">
                    <input date-range-picker class="form-control date-picker" placeholder="Select date range" type="text"
                           ng-model="filter.createDate" ng-change="filteredPayments(filter)"/>
                </div>
            </div>
            <!--<div class=" col-sm-2">
                <multi-select
                        default-label="Status filter"
                        input-model="status"
                        output-model="resultData.status"
                        button-label="icon name"
                        item-label="icon name maker"
                        tick-property="ticked"
                        max-labels="1"
                        max-height="250px"
                        >
                </multi-select>
            </div>
            <div class=" col-sm-2">
                <multi-select
                        default-label="CashierOffice filter"
                        input-model="cashierOfficies"
                        output-model="resultData.cashierOffice"
                        button-label="icon name"
                        item-label="icon name maker"
                        tick-property="ticked"
                        max-labels="1"
                        max-height="250px"
                        >
                </multi-select>
            </div>
            <div class=" col-sm-2">
                <multi-select
                        default-label="Type filter"
                        input-model="paymentType"
                        output-model="resultData.type"
                        button-label="icon name"
                        item-label="icon name maker"
                        tick-property="ticked"
                        max-labels="1"
                        selection-mode="single"
                        >
                </multi-select>
            </div>-->
        </div>

    </div>
</div>

<div class="col-sm-12 col-md-12" >
    <div class="pa-md" ng-show="draftPayments.length">
        <h3 style="margin-bottom:10px;">Draft payments:</h3>

        <div class="row">
            <div  style="min-height:100px;" class="col-sm-2 col-md-2 col-bt-2" ng-repeat="item in draftPayments" ng-click="edit(item)"><!--
                <div class="panel panel-body">
                    <div>
                        <p ng-if="item.documentId!='Other'">Order #{{item.documentId}}</p>
                        <p ng-if="item.documentId=='Other'">Other payment</p>
                    </div>
                    <div>
                        <div>{{item.amount}}&nbsp{{item.currency}}&nbsp;&nbsp;{{item.type}}</div>
                        <p class="caption">{{item.factoryName}}&nbsp;&nbsp;<span class="date">{{item.paymentDate}}</span></p>
                    </div>
                </div>-->
                <div class="panel panel-body">
                    <table>
                        <tr>
                            <td>Document:</td>
                            <td ng-if="item.documentId!='Other'">
                                <a ng-href="buyer/orders/id/{{item.documentId}}" target="_blank" ng-click="$event.stopPropagation()">Order #{{item.documentId}}</a>
                            </td>
                            <td ng-if="item.documentId=='Other'">{{item.documentId}} payment</td>
                        </tr>
                        <tr>
                            <td>Factory:</td>
                            <td>{{item.factoryName||"none"}}</td>
                        </tr>
                        <tr>
                            <td>Type:</td>
                            <td>{{item.type}}</td>
                        </tr>
                        <tr>
                            <td>Amount:</td>
                            <td ng-if="item.type=='payment'">{{item.amount}} {{item.currency}}</td>
                            <td ng-if="item.type=='refund'">{{item.refund}} {{item.currency}}</td>
                        </tr>
                        <tr>
                            <td>Note:</td>
                            <td>{{item.notes}}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="col-sm-12 col-md-12" >
    <div ng-show="paidPayments.length">
        <h3 style="margin:0 0 0 40px;">Balance:</h3>
        <widget-table
                datarows="paidPayments"
                dataheader="tableHeader"
                edit="edit()"
                row="row"
                >
        </widget-table>
        <div class="pa-md">
            <div class="row">
                <div class="col-md-12">
                    <table class="table table-bordered table-striped dataTable no-footer">
                        <tbody>
                        <tr>
                            <td colspan="7"><strong>Total</strong></td>
                            <td>Credit: {{paidSummary.amount}} {{paidSummary.currency}}</td>
                            <td>Debit: {{paidSummary.refund}} {{paidSummary.currency}}</td>
                            <td>Balance: {{paidSummary.difference}} {{paidSummary.currency}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
